\chapter{Manual de instalación y utilización}
\label{ch:manual}

En el presente anexo, se detallan los procedimientos a seguir para la instl

\section{Requisitos previos}
Para la correcta creación de un archivo binario compatible con la FPGA \emph{Lattice iCE40HX1K}

\begin{verbatim}
$ sudo apt-get install build-essential clang bison flex libreadline-dev \
                       gawk tcl-dev libffi-dev git mercurial graphviz   \
                       xdot pkg-config python python3 libftdi-dev       \
                       qt5-default python3-dev libboost-all-dev cmake}
\end{verbatim}
\begin{verbatim}
$ sudo dnf install make automake gcc gcc-c++ kernel-devel clang bison            \
                   flex readline-devel gawk tcl-devel libffi-devel git mercurial \
                   graphviz python-xdot pkgconfig python python3 libftdi-devel   \
                   qt5-devel python3-devel boost-devel boost-python3-devel
\end{verbatim}
\begin{verbatim}
$ sudo pacman -S base-devel clang boost-libs python qt5-base boost \
                 cmake eigen git trellis libffi tcl xdot mercurial \
                 graphviz libftdi-compat 
\end{verbatim}

\subsection{Instalación de las herramientas \emph{IceStorm}}
Se procede a instalar las herramientas y bases de datos del proyecto \emph{IceStorm} (\emph{icepack}, \emph{icebox}, \emph{iceprog}, \emph{icetime} y bases de datos de las diversas FPGAs).

\begin{lstlisting}[language=bash]
$ git clone https://github.com/cliffordwolf/icestorm.git icestorm
$ cd icestorm
$ make -j$(nproc)
$ sudo make install
\end{lstlisting}


\subsection{Instalación de \emph{NextPNR}}
Se procede a instalar la herramienta de posicionado y encaminamiento (\emph{Place-And-Route}) \emph{NextPNR}.

\begin{lstlisting}[language=bash]
$ git clone https://github.com/YosysHQ/nextpnr nextpnr
$ cd nextpnr
$ cmake -DARCH=ice40 -DCMAKE_INSTALL_PREFIX=/usr/local .
$ make -j$(nproc)
$ sudo make install
\end{lstlisting}


\subsection{Instalación de \emph{Yosys}}
Se procede a instalar la herramienta de sínstesis del lenguaje Verilog \emph{Yosys}.

\begin{lstlisting}[language=bash]
$ git clone https://github.com/cliffordwolf/yosys.git yosys
$ cd yosys
$ make -j$(nproc)
$ sudo make install
\end{lstlisting}